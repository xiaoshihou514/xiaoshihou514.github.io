# 记一次学习过程，bevy、wgsl和图像编程

## 3月10日

我大概知道了我想要的功能（图片蒙版）需要用wgsl实现。

## 3月21日

正在把OKLab的一系列C函数迁移到wgsl。

## 3月22日

- OkLab迁移完毕，但现在所有像素都被蒙版成透明的了，正在调试。
- 研究如何实现更改某参数后即时渲染新材质

## 3月26日

- 理解了ECS系统：在生成实体时将实体在引擎中的“物理投射”（几何图形，模型等）与一个结构体绑定，随后进行查找与更改。
- 实现了即时渲染，但蒙版依然始终为透明，且似乎有内存未被释放。
- 修复了蒙版透明的bug（原因是wgsl中转换出的色调参数范围为`[0, 1]`而不是`[0, 360]`）。
- 接下来需要继续使用光影绘制分布可视化。
- 首先把三维的图像打成了二维的，希望它能快一点，而且这样后面做多窗口容易（顺便这内存占用还挺大的，要400M）。

<video controls src="/binary/2025-03-26_15-19-30.mp4?url" />

## 3月31日

- 实现窗口分割，画了个从例子里抄来的渐变方块。

## 4月1日

- 实现根据OKHSV的H参数渐变的方块（最后还是用的光源，自带的顶点渐变应该底层也是光影），颜色变化没有模板网站上那么好，我被骗了！甚至他那个条疑似用的是HSLuv分布绘制的...

## 4月2日

- 用背景色的矩形把不要的部分蒙住得到了柱状图

<video controls src="/binary/2025-04-02_12-07-57.mp4?url" />

## 4月17日

- 拆分了一部分代码逻辑
- 准备使用自定义网格绘制3维可视化，首先先把光影搞出来
- 由于光影中的位置依赖网格不动，所以鼠标控制旋转需要改成旋转相机。

<video controls src="/binary/2025-04-17_15-28-15.mp4?url" />

## 4月18日

- 成了！！！

<video controls src="/binary/2025-04-18_11-02-08.mp4?url" />

- 这太美了！
